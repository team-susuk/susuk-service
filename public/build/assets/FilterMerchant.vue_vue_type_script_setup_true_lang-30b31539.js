import{d as I,r as y,C as M,o as i,c as u,f as _,t as x,l as m,b as o,F as k,m as P,s as V,R as U,n as O,K,T as N,j as E,U as L,V as R,a as $,e as C,_ as T,k as B,u as c,v as j,S as z,W as D,X as F,h as W}from"./app-9e983d03.js";import{_ as A}from"./Single.vue_vue_type_script_setup_true_lang-93855848.js";import{B as q}from"./OutlineBlue-23e81c05.js";const H=["for"],J={key:0,class:"text-red"},Q=["data-value"],X=["id"],G={class:"px-3 items-center flex bg-neutral-light-gray text-xs h-[32px] rounded-full font-medium","x-on:click":"dropdownOpen=false"},Y=["onClick"],Z=o("i",{class:"isax icon-arrow-down-1 float-right mt-[-37px] me-4 text-[#B4B6B8] text-[13px]"},null,-1),ee={key:0,class:"mb-4"},te={class:"text-[11px] text-dark float-right"},oe=o("span",{"x-text":"input.length"},null,-1),ae={class:"flex-1 overflow-auto"},le=["onClick"],se=o("br",null,null,-1),re=o("br",null,null,-1),ie={key:1,class:"mt-[-7px] error-text mb-4 block text-[11px]"},ne={key:2,class:"block mt-[-7px] text-[10px] mb-4 text-[#A3A3A3]"},de=I({__name:"MultipleCategory",props:{label:{},help:{},error:{},id:{},category:{},selected:{},popup:{type:Boolean}},emits:["update:modelValue"],setup(f,{emit:b}){const t=b,p=f,h=y(""),n=y([]),g=y("auto"),l=y(!0),a=e=>{n.value.map(r=>r.id).includes(e.id)||(n.value.push({id:e.id,name:e.name}),t("update:modelValue",n.value.map(r=>r.id)))},s=e=>{n.value=n.value.filter(d=>d.id!==e),t("update:modelValue",n.value.map(d=>d.id))},v=()=>{const e=document.getElementById(`wrapper_category_${p.id}`);p.popup&&(e?(g.value=`${e.getBoundingClientRect().width}px`,window.innerHeight-e.getBoundingClientRect().bottom<250?l.value=!1:l.value=!0):g.value="auto")};M(()=>{if(p.selected){const e=[],d=JSON.parse(JSON.stringify(p.selected));p.category.forEach(r=>{d.includes(r.id)&&e.push({id:r.id,name:r.name})}),n.value=e}v(),window.addEventListener("resize",v)});const w=()=>{let e=h.value.toLowerCase();return p.category.filter(function(d){return d.name.toLowerCase().includes(e)})};return(e,d)=>(i(),u(k,null,[e.label?(i(),u("label",{key:0,for:e.id,class:"text-[12px] text-dark mb-1 block"},[_(x(e.label)+" ",1),e.$attrs.required?(i(),u("span",J,"*")):m("",!0)],8,H)):m("",!0),o("div",{class:V(["relative mb-2",{"has-error":e.error}]),"x-data":"{input: $el.getAttribute('data-value'),dropdownOpen : false}","data-value":e.$attrs.value||""},[o("div",{class:"border border-light-gray rounded-lg placeholder:text-neutral-gray px-4 text-sm min-h-[42px] flex gap-2 flex-wrap outline-none py-2 w-full mb-2 items-center",id:"wrapper_category_"+e.id},[(i(!0),u(k,null,P(n.value,r=>(i(),u("span",G,[_(x(r.name)+" ",1),o("i",{class:"isax-b icon-close-circle ms-3 cursor-pointer text-neutral-gray-3 text-lg",onClick:S=>s(r.id)},null,8,Y)]))),256)),o("div",{class:V(["mt-[3px] flex-1 h-full min-w-[100px] cursor-pointer whitespace-nowrap overflow-hidden font-medium",{"text-[#ddd]":n.value.length}]),"x-on:click":"dropdownOpen=true",onClick:v}," Pilih Kategori ",2)],8,X),Z,e.$attrs.maxlength?(i(),u("div",ee,[o("p",te,[oe,_("/"+x(e.$attrs.maxlength),1)])])):m("",!0),o("div",{class:V(["fixed w-full z-10",{"bottom-0":!l.value,fixed:e.popup,absolute:!e.popup}]),"x-transition:enter":"transition ease-out duration-50","x-transition:enter-start":"opacity-0 -translate-y-1","x-transition:enter-end":"opacity-100","x-show":"dropdownOpen","x-on:click.away":"dropdownOpen = false"},[o("div",{class:"bg-white border rounded-lg w-full max-h-60 p-2 flex flex-col",style:U({width:g.value})},[o("div",null,[O(o("input",{type:"text","onUpdate:modelValue":d[0]||(d[0]=r=>h.value=r),class:"bg-white rounded-lg placeholder:text-neutral-gray px-4 text-xs outline-none py-2 w-full mb-2 border-light-gray font-medium focus:ring-0 focus:border-light-gray",placeholder:"Cari Kategori"},null,512),[[K,h.value]])]),o("ul",ae,[(i(!0),u(k,null,P(w(),r=>(i(),u("li",{key:r.id},[o("a",{href:"javascript:;",class:"flex gap-3 p-[5px] px-2 rounded-md hover:bg-neutral-light-gray text-sm text-dark transition-all","x-on:click":"dropdownOpen=false",onClick:S=>a(r)},x(r.name),9,le)]))),128))])],4),se,re],2),e.error?(i(),u("small",ie,x(e.error),1)):m("",!0),e.help?(i(),u("small",ne,x(e.help),1)):m("",!0)],10,Q)],64))}}),ce={"x-data":"{popup: false}"},ue=o("a",{"x-on:click":"popup=true",id:"popup-filter"},null,-1),pe={class:"grid grid-cols-2 gap-x-3"},me={class:"col-span-2 md:col-span-1"},fe={class:"col-span-2 md:col-span-1"},he={class:"col-span-2 mb-3"},ge={class:"flex items-center px-3 py-4 border border-light-gray rounded-lg col-span-2 mb-4"},ve=o("label",{for:"incentives_amount_highest",class:"w-full text-sm text-dark font-medium"},"Sort by Incentive Amount (High to Low)",-1),xe=o("a",{id:"close-filter","x-on:click":"popup=false",hidden:""},null,-1),we=I({__name:"FilterMerchant",props:["categories","regions"],setup(f){const b=f,t=N({province:"",city:"",categories:[],sort:""}),p=y(!0),h=y([]),n=()=>{const l=t;var a={};l.categories.forEach((s,v)=>{a[`filter[categories][${v}]`]=s}),a["filter[province]"]=l.province,a["filter[city]"]=l.city,a["filter[sort]"]=l.sort,D(),F(a,!1),W("close-filter")};E(()=>t.province,(l,a)=>{p.value=!1,g()});const g=()=>{b.regions.filter(l=>{if(l.id==t.province){let a=t.city;h.value=l.cities,t.city="",h.value.map(s=>{s.id==a&&(t.city=a)}),setTimeout(()=>{p.value=!0},100)}})};return L(()=>{let l=R();t.city=l["filter[city]"]||"",t.sort=l["filter[sort]"]||"",t.province=l["filter[province]"]||"";const a=[];for(const s in l)if(s.startsWith("filter[categories][")&&s.match(/\[(\d+)\]/)){const w=parseInt(l[s],10);a.push(w)}t.categories=Array.from(new Set(a)),g()}),(l,a)=>(i(),u("section",ce,[ue,$(T,{title:"Filter Merchant"},{default:C(()=>[o("div",pe,[o("div",me,[f.regions?(i(),B(A,{key:0,placeholder:"Pilih Provinsi",label:"Provinsi",data:f.regions,id:"province",modelValue:c(t).province,"onUpdate:modelValue":a[0]||(a[0]=s=>c(t).province=s),selected:c(t).province,popup:!0},null,8,["data","modelValue","selected"])):m("",!0)]),o("div",fe,[p.value?(i(),B(A,{key:0,placeholder:"Pilih Kabupaten",label:"Kabupaten/kotamadya",data:h.value,id:"city",modelValue:c(t).city,"onUpdate:modelValue":a[1]||(a[1]=s=>c(t).city=s),selected:c(t).city,popup:!0},null,8,["data","modelValue","selected"])):m("",!0)]),o("div",he,[f.categories?(i(),B(de,{key:0,label:"Kategori Merchant",category:f.categories,id:"categories",modelValue:c(t).categories,"onUpdate:modelValue":a[2]||(a[2]=s=>c(t).categories=s),selected:c(t).categories,popup:!0},null,8,["category","modelValue","selected"])):m("",!0)]),o("div",ge,[ve,O(o("input",{id:"incentives_amount_highest",value:"incentives_amount_highest",name:"sort",type:"radio",class:"w-5 h-5 text-white bg-white border-gray-600 300 focus:ring-green focus:ring-1 cursor-pointer transition-all checked:text-green","onUpdate:modelValue":a[3]||(a[3]=s=>c(t).sort=s)},null,512),[[j,c(t).sort]])]),$(q,{class:"justify-center",href:l.route("guide.merchants.index")},{default:C(()=>[_(" Reset ")]),_:1},8,["href"]),$(z,{class:"justify-center font-semibold","x-on:click":"popup=false",onClick:n},{default:C(()=>[_(" Terapkan ")]),_:1}),xe])]),_:1})]))}});export{we as _};
