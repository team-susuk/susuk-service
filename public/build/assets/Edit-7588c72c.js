import{d as I,Q as C,r as f,T as B,j as x,C as K,k as g,e as k,o as n,a as s,u as a,Z as D,b as o,l as v,c as h,m as $,t as U,n as A,v as L,F as M,f as j,S as E,w as F}from"./app-d72d628d.js";import{_ as R}from"./AuthLayout.vue_vue_type_script_setup_true_lang-a1ecf7f3.js";import{_ as W}from"./HeaderDetail.vue_vue_type_script_setup_true_lang-b7b41a75.js";import{I as y}from"./Index-63df0b7d.js";import{I as Q}from"./InputNumber-21b62943.js";import{_ as Z}from"./MultipleLanguage.vue_vue_type_script_setup_true_lang-884fa5df.js";import{_ as V}from"./Single.vue_vue_type_script_setup_true_lang-b48e5073.js";const q={class:"flex-center gap-7 mb-10"},z=["src"],G=["onSubmit"],H={class:"grid grid-cols-2 gap-x-4 mb-2"},J={class:"mb-2"},O=o("label",{class:"text-[12px] text-dark mb-1 block"}," Profesi ",-1),X={class:"grid grid-cols-1 md:grid-cols-3 gap-x-3"},Y=["for"],ee=["id","value","onUpdate:modelValue"],ae={key:0,class:"mt-[-7px] error-text mb-4 block text-[11px]"},ne=I({__name:"Edit",props:["languages","professions","regions"],setup(c){const _=c,i=C().props.auth.guide,p=f(!0),b=f(!0),u=f([]),d=f([]),e=B({idcard_name:i.name,name:i.nick_name,date_of_birth:i.birthday_formated,phone_number:i.phone_number,image:null,profession:i.profession_id,languages:Array.from(new Set(i.languages)),province:i.province_id,city:i.city_id,subdistrict:i.subdistrict_id}),P=()=>{e.processing||e.post(route("guide.profile.edit"),{onSuccess:()=>{}})};x(()=>e.province,(l,r)=>{N()});const N=()=>{p.value=!1,_.regions.filter(l=>{let r=e.city;e.city="",l.id==e.province&&(u.value=l.cities,u.value.map(t=>{t.id==r&&(e.city=r)}),setTimeout(()=>{p.value=!0},100))})};x(()=>e.city,(l,r)=>{w()});const w=()=>{b.value=!1,d.value=[],_.regions.filter(l=>{l.id==e.province&&u.value.map(r=>{let t=e.subdistrict;e.subdistrict="",r.id==e.city&&(d.value=r.subdistricts,d.value.map(m=>{m.id==t&&(e.subdistrict=t)})),setTimeout(()=>{b.value=!0},100)})})};K(()=>{S()});const S=()=>{p.value=!1,b.value=!1,d.value=[],_.regions.filter(l=>{let r=i.city_id;l.id==i.province_id&&(u.value=l.cities,u.value.map(t=>{if(t.id==r){e.city=r;let m=i.subdistrict_id;d.value=t.subdistricts,d.value.map(T=>{T.id==m&&(e.subdistrict=m)})}}),setTimeout(()=>{p.value=!0,b.value=!0},100))})};return(l,r)=>(n(),g(R,{"hide-nav":!0},{default:k(()=>[s(a(D),{title:"Ubah Profile"}),s(W,{backUrl:l.route("guide.profile.detail"),title:"Ubah Profile"},null,8,["backUrl"]),o("div",q,[o("img",{src:a(i).profile,alt:"",class:"w-32 h-32 object-cover rounded-full mb-1"},null,8,z)]),o("form",{onSubmit:F(P,["prevent"])},[s(y,{label:"Nama lengkap (sesuai KTP)",type:"text",placeholder:"Input Nama lengkap (sesuai KTP)",id:"idcard_name",name:"idcard_name",value:a(e).idcard_name,modelValue:a(e).idcard_name,"onUpdate:modelValue":r[0]||(r[0]=t=>a(e).idcard_name=t),error:a(e).errors.idcard_name,disabled:""},null,8,["value","modelValue","error"]),s(y,{label:"Nama Panggilan",type:"text",placeholder:"Input Nama Panggilan",id:"name",name:"name",value:a(e).name,modelValue:a(e).name,"onUpdate:modelValue":r[1]||(r[1]=t=>a(e).name=t),error:a(e).errors.name},null,8,["value","modelValue","error"]),s(y,{label:"Tanggal Lahir",type:"text",placeholder:"Input Tanggal Lahir",id:"date_of_birth",name:"date_of_birth",value:a(e).date_of_birth,modelValue:a(e).date_of_birth,"onUpdate:modelValue":r[2]||(r[2]=t=>a(e).date_of_birth=t),error:a(e).errors.date_of_birth,disabled:""},null,8,["value","modelValue","error"]),s(Q,{label:"Nomor WA",type:"text",placeholder:"Input Nomor WA contoh: 6281....",id:"phone",name:"phone",value:a(e).phone_number,modelValue:a(e).phone_number,"onUpdate:modelValue":r[3]||(r[3]=t=>a(e).phone_number=t),error:a(e).errors.phone_number,disabled:""},null,8,["value","modelValue","error"]),c.regions?(n(),g(V,{key:0,placeholder:"Pilih Provinsi",label:"Provinsi",data:c.regions,id:"province",modelValue:a(e).province,"onUpdate:modelValue":r[4]||(r[4]=t=>a(e).province=t),selected:a(e).province,error:a(e).errors.province},null,8,["data","modelValue","selected","error"])):v("",!0),o("div",H,[o("div",null,[p.value?(n(),g(V,{key:0,placeholder:"Pilih Kabupaten",label:"Kabupaten/kotamadya",data:u.value,id:"city",modelValue:a(e).city,"onUpdate:modelValue":r[5]||(r[5]=t=>a(e).city=t),selected:a(e).city,error:a(e).errors.city},null,8,["data","modelValue","selected","error"])):v("",!0)]),o("div",null,[b.value?(n(),g(V,{key:0,placeholder:"Pilih Kecamatan",label:"Kecamatan",data:d.value,id:"subdistrict",modelValue:a(e).subdistrict,"onUpdate:modelValue":r[6]||(r[6]=t=>a(e).subdistrict=t),selected:a(e).subdistrict,error:a(e).errors.subdistrict},null,8,["data","modelValue","selected","error"])):v("",!0)])]),o("div",J,[O,o("div",X,[(n(!0),h(M,null,$(c.professions,t=>(n(),h("div",{class:"flex items-center px-3 py-4 border border-light-gray rounded-lg",key:t.id},[o("label",{for:t.id,class:"w-full text-sm font-medium text-dark"},U(t.name),9,Y),A(o("input",{id:t.id,value:t.id,name:"profession",type:"radio",class:"w-5 h-5 text-white bg-white border-gray-600 300 focus:ring-green focus:ring-1 cursor-pointer transition-all checked:text-green","onUpdate:modelValue":m=>a(e).profession=m},null,8,ee),[[L,a(e).profession]])]))),128))]),a(e).errors.profession?(n(),h("small",ae,U(a(e).errors.profession),1)):v("",!0)]),s(Z,{label:"Bahasa",category:c.languages,id:"languages",modelValue:a(e).languages,"onUpdate:modelValue":r[7]||(r[7]=t=>a(e).languages=t),selected:a(e).languages,error:a(e).errors.languages},null,8,["category","modelValue","selected","error"]),s(E,{class:"w-full flex-center mt-8",type:"submit",disabled:!a(e).idcard_name||!a(e).name||!a(e).date_of_birth||!a(e).phone_number||!a(e).profession||!a(e).languages.length||a(e).processing,loading:a(e).processing},{default:k(()=>[j(" Simpan ")]),_:1},8,["disabled","loading"])],40,G)]),_:1}))}});export{ne as default};
