import{d as O,r as y,C as U,o as i,c as u,f as _,t as x,l as m,b as t,F as k,m as A,s as V,P as N,n as P,J as E,T as K,j as L,R,U as T,a as $,e as C,_ as j,k as B,u as n,v as I,S as z,V as D,W as F,h as W}from"./app-ae847c7a.js";import{_ as S}from"./Single.vue_vue_type_script_setup_true_lang-4718729f.js";import{B as J}from"./OutlineBlue-68c50c33.js";const q=["for"],H={key:0,class:"text-red"},Q=["data-value"],G=["id"],X={class:"px-3 items-center flex bg-neutral-light-gray text-xs h-[32px] rounded-full font-medium","x-on:click":"dropdownOpen=false"},Y=["onClick"],Z=t("i",{class:"isax icon-arrow-down-1 float-right mt-[-37px] me-4 text-[#B4B6B8] text-[13px]"},null,-1),ee={key:0,class:"mb-4"},te={class:"text-[11px] text-dark float-right"},oe=t("span",{"x-text":"input.length"},null,-1),le={class:"flex-1 overflow-auto"},ae=["onClick"],se=t("br",null,null,-1),re=t("br",null,null,-1),ie={key:1,class:"mt-[-7px] error-text mb-4 block text-[11px]"},ne={key:2,class:"block mt-[-7px] text-[10px] mb-4 text-[#A3A3A3]"},de=O({__name:"MultipleCategory",props:{label:{},help:{},error:{},id:{},category:{},selected:{},popup:{type:Boolean}},emits:["update:modelValue"],setup(f,{emit:b}){const o=b,p=f,g=y(""),d=y([]),h=y("auto"),a=y(!0),l=e=>{d.value.map(r=>r.id).includes(e.id)||(d.value.push({id:e.id,name:e.name}),o("update:modelValue",d.value.map(r=>r.id)))},s=e=>{d.value=d.value.filter(c=>c.id!==e),o("update:modelValue",d.value.map(c=>c.id))},v=()=>{const e=document.getElementById(`wrapper_category_${p.id}`);p.popup&&(e?(h.value=`${e.getBoundingClientRect().width}px`,window.innerHeight-e.getBoundingClientRect().bottom<250?a.value=!1:a.value=!0):h.value="auto")};U(()=>{if(p.selected){const e=[],c=JSON.parse(JSON.stringify(p.selected));p.category.forEach(r=>{c.includes(r.id)&&e.push({id:r.id,name:r.name})}),d.value=e}v(),window.addEventListener("resize",v)});const w=()=>{let e=g.value.toLowerCase();return p.category.filter(function(c){return c.name.toLowerCase().includes(e)})};return(e,c)=>(i(),u(k,null,[e.label?(i(),u("label",{key:0,for:e.id,class:"text-[12px] text-dark mb-1 block"},[_(x(e.label)+" ",1),e.$attrs.required?(i(),u("span",H,"*")):m("",!0)],8,q)):m("",!0),t("div",{class:V(["relative mb-2",{"has-error":e.error}]),"x-data":"{input: $el.getAttribute('data-value'),dropdownOpen : false}","data-value":e.$attrs.value||""},[t("div",{class:"border border-light-gray rounded-lg placeholder:text-neutral-gray px-4 text-sm min-h-[42px] flex gap-2 flex-wrap outline-none py-2 w-full mb-2 items-center",id:"wrapper_category_"+e.id},[(i(!0),u(k,null,A(d.value,r=>(i(),u("span",X,[_(x(r.name)+" ",1),t("i",{class:"isax-b icon-close-circle ms-3 cursor-pointer text-neutral-gray-3 text-lg",onClick:M=>s(r.id)},null,8,Y)]))),256)),t("div",{class:V(["mt-[3px] flex-1 h-full min-w-[100px] cursor-pointer whitespace-nowrap overflow-hidden font-medium",{"text-[#ddd]":d.value.length}]),"x-on:click":"dropdownOpen=true",onClick:v}," Pilih Kategori ",2)],8,G),Z,e.$attrs.maxlength?(i(),u("div",ee,[t("p",te,[oe,_("/"+x(e.$attrs.maxlength),1)])])):m("",!0),t("div",{class:V(["fixed w-full z-10",{"bottom-0":!a.value,fixed:e.popup,absolute:!e.popup}]),"x-transition:enter":"transition ease-out duration-50","x-transition:enter-start":"opacity-0 -translate-y-1","x-transition:enter-end":"opacity-100","x-show":"dropdownOpen","x-on:click.away":"dropdownOpen = false"},[t("div",{class:"bg-white border rounded-lg w-full max-h-60 p-2 flex flex-col",style:N({width:h.value})},[t("div",null,[P(t("input",{type:"text","onUpdate:modelValue":c[0]||(c[0]=r=>g.value=r),class:"bg-white rounded-lg placeholder:text-neutral-gray px-4 text-xs outline-none py-2 w-full mb-2 border-light-gray font-medium focus:ring-0 focus:border-light-gray",placeholder:"Cari Kategori"},null,512),[[E,g.value]])]),t("ul",le,[(i(!0),u(k,null,A(w(),r=>(i(),u("li",{key:r.id},[t("a",{href:"javascript:;",class:"flex gap-3 p-[5px] px-2 rounded-md hover:bg-neutral-light-gray text-sm text-dark transition-all","x-on:click":"dropdownOpen=false",onClick:M=>l(r)},x(r.name),9,ae)]))),128))])],4),se,re],2),e.error?(i(),u("small",ie,x(e.error),1)):m("",!0),e.help?(i(),u("small",ne,x(e.help),1)):m("",!0)],10,Q)],64))}}),ce={"x-data":"{popup: false}"},ue=t("a",{"x-on:click":"popup=true",id:"popup-filter"},null,-1),pe={class:"grid grid-cols-2 gap-x-3"},me={class:"col-span-2 md:col-span-1"},fe={class:"col-span-2 md:col-span-1"},ge={class:"col-span-2 mb-3"},he={class:"flex items-center px-3 py-4 border border-light-gray rounded-lg col-span-2 mb-4"},ve=t("label",{for:"incentives_amount_highest",class:"w-full text-sm text-dark font-medium"},"Sort By Incentives Amount (Highest)",-1),xe={class:"flex items-center px-3 py-4 border border-light-gray rounded-lg col-span-2 mb-4"},ye=t("label",{for:"incentives_amount_lowest",class:"w-full text-sm text-dark font-medium"},"Sort By Incentives Amount (Lowest)",-1),_e=t("a",{id:"close-filter","x-on:click":"popup=false",hidden:""},null,-1),Ve=O({__name:"FilterMerchant",props:["categories","regions"],setup(f){const b=f,o=K({province:"",city:"",categories:[],sort:""}),p=y(!0),g=y([]),d=()=>{const a=o;var l={};a.categories.forEach((s,v)=>{l[`filter[categories][${v}]`]=s}),l["filter[province]"]=a.province,l["filter[city]"]=a.city,l["filter[sort]"]=a.sort,D(),F(l,!1),W("close-filter")};L(()=>o.province,(a,l)=>{p.value=!1,h()});const h=()=>{b.regions.filter(a=>{if(a.id==o.province){let l=o.city;g.value=a.cities,o.city="",g.value.map(s=>{s.id==l&&(o.city=l)}),setTimeout(()=>{p.value=!0},100)}})};return R(()=>{let a=T();o.city=a["filter[city]"]||"",o.sort=a["filter[sort]"]||"",o.province=a["filter[province]"]||"";const l=[];for(const s in a)if(s.startsWith("filter[categories][")&&s.match(/\[(\d+)\]/)){const w=parseInt(a[s],10);l.push(w)}o.categories=Array.from(new Set(l)),h()}),(a,l)=>(i(),u("section",ce,[ue,$(j,{title:"Filter Merchant"},{default:C(()=>[t("div",pe,[t("div",me,[f.regions?(i(),B(S,{key:0,placeholder:"Pilih Provinsi",label:"Provinsi",data:f.regions,id:"province",modelValue:n(o).province,"onUpdate:modelValue":l[0]||(l[0]=s=>n(o).province=s),selected:n(o).province,popup:!0},null,8,["data","modelValue","selected"])):m("",!0)]),t("div",fe,[p.value?(i(),B(S,{key:0,placeholder:"Pilih Kabupaten",label:"Kabupaten/kotamadya",data:g.value,id:"city",modelValue:n(o).city,"onUpdate:modelValue":l[1]||(l[1]=s=>n(o).city=s),selected:n(o).city,popup:!0},null,8,["data","modelValue","selected"])):m("",!0)]),t("div",ge,[f.categories?(i(),B(de,{key:0,label:"Kategori Merchant",category:f.categories,id:"categories",modelValue:n(o).categories,"onUpdate:modelValue":l[2]||(l[2]=s=>n(o).categories=s),selected:n(o).categories,popup:!0},null,8,["category","modelValue","selected"])):m("",!0)]),t("div",he,[ve,P(t("input",{id:"incentives_amount_highest",value:"incentives_amount_highest",name:"sort",type:"radio",class:"w-5 h-5 text-white bg-white border-gray-600 300 focus:ring-green focus:ring-1 cursor-pointer transition-all checked:text-green","onUpdate:modelValue":l[3]||(l[3]=s=>n(o).sort=s)},null,512),[[I,n(o).sort]])]),t("div",xe,[ye,P(t("input",{id:"incentives_amount_lowest",value:"incentives_amount_lowest",name:"sort",type:"radio",class:"w-5 h-5 text-white bg-white border-gray-600 300 focus:ring-green focus:ring-1 cursor-pointer transition-all checked:text-green","onUpdate:modelValue":l[4]||(l[4]=s=>n(o).sort=s)},null,512),[[I,n(o).sort]])]),$(J,{class:"justify-center",href:a.route("guide.merchants.index")},{default:C(()=>[_(" Reset ")]),_:1},8,["href"]),$(z,{class:"justify-center font-semibold","x-on:click":"popup=false",onClick:d},{default:C(()=>[_(" Terapkan ")]),_:1}),_e])]),_:1})]))}});export{Ve as _};
