import{d as M,r as y,C as U,o as i,c as u,f as b,t as v,l as m,b as o,F as k,m as S,s as V,P as K,n as P,J as N,T as E,j as T,R as j,U as z,a as $,e as C,_ as D,k as B,u as n,v as A,S as F,V as L,W as R,h as W}from"./app-2c3ca879.js";import{_ as I}from"./Single.vue_vue_type_script_setup_true_lang-117b2f3b.js";import{B as J}from"./OutlineBlue-61f3b107.js";const q=["for"],H={key:0,class:"text-red"},Q=["data-value"],G=["id"],X={class:"px-3 items-center flex bg-neutral-light-gray text-xs h-[32px] rounded-full font-medium","x-on:click":"dropdownOpen=false"},Y=["onClick"],Z=o("i",{class:"isax icon-arrow-down-1 float-right mt-[-37px] me-4 text-[#B4B6B8] text-[13px]"},null,-1),ee={key:0,class:"mb-4"},te={class:"text-[11px] text-dark float-right"},oe=o("span",{"x-text":"input.length"},null,-1),le={class:"flex-1 overflow-auto"},ae=["onClick"],re=o("br",null,null,-1),se=o("br",null,null,-1),ie={key:1,class:"mt-[-7px] error-text mb-4 block text-[11px]"},ne={key:2,class:"block mt-[-7px] text-[10px] mb-4 text-[#A3A3A3]"},de=M({__name:"MultipleCategory",props:{label:{},help:{},error:{},id:{},category:{},selected:{},popup:{type:Boolean}},emits:["update:modelValue"],setup(f,{emit:w}){const t=w,p=f,g=y(""),d=y([]),h=y("auto"),a=y(!0),l=e=>{d.value.map(s=>s.id).includes(e.id)||(d.value.push({id:e.id,name:e.name}),t("update:modelValue",d.value.map(s=>s.id)))},r=e=>{d.value=d.value.filter(c=>c.id!==e),t("update:modelValue",d.value.map(c=>c.id))},x=()=>{const e=document.getElementById(`wrapper_category_${p.id}`);p.popup&&(e?(h.value=`${e.getBoundingClientRect().width}px`,window.innerHeight-e.getBoundingClientRect().bottom<250?a.value=!1:a.value=!0):h.value="auto")};U(()=>{if(p.selected){const e=[],c=JSON.parse(JSON.stringify(p.selected));p.category.forEach(s=>{c.includes(s.id)&&e.push({id:s.id,name:s.name})}),d.value=e}x(),window.addEventListener("resize",x)});const _=()=>{let e=g.value.toLowerCase();return p.category.filter(function(c){return c.name.toLowerCase().includes(e)})};return(e,c)=>(i(),u(k,null,[e.label?(i(),u("label",{key:0,for:e.id,class:"text-[12px] text-dark mb-1 block"},[b(v(e.label)+" ",1),e.$attrs.required?(i(),u("span",H,"*")):m("",!0)],8,q)):m("",!0),o("div",{class:V(["relative mb-2",{"has-error":e.error}]),"x-data":"{input: $el.getAttribute('data-value'),dropdownOpen : false}","data-value":e.$attrs.value||""},[o("div",{class:"border border-light-gray rounded-lg placeholder:text-neutral-gray px-4 text-sm min-h-[42px] flex gap-2 flex-wrap outline-none py-2 w-full mb-2 items-center",id:"wrapper_category_"+e.id},[(i(!0),u(k,null,S(d.value,s=>(i(),u("span",X,[b(v(s.name)+" ",1),o("i",{class:"isax-b icon-close-circle ms-3 cursor-pointer text-neutral-gray-3 text-lg",onClick:O=>r(s.id)},null,8,Y)]))),256)),o("div",{class:V(["mt-[3px] flex-1 h-full min-w-[100px] cursor-pointer whitespace-nowrap overflow-hidden font-medium",{"text-[#ddd]":d.value.length}]),"x-on:click":"dropdownOpen=true",onClick:x}," Pilih Kategori ",2)],8,G),Z,e.$attrs.maxlength?(i(),u("div",ee,[o("p",te,[oe,b("/"+v(e.$attrs.maxlength),1)])])):m("",!0),o("div",{class:V(["fixed w-full z-10",{"bottom-0":!a.value,fixed:e.popup,absolute:!e.popup}]),"x-transition:enter":"transition ease-out duration-50","x-transition:enter-start":"opacity-0 -translate-y-1","x-transition:enter-end":"opacity-100","x-show":"dropdownOpen","x-on:click.away":"dropdownOpen = false"},[o("div",{class:"bg-white border rounded-lg w-full max-h-60 p-2 flex flex-col",style:K({width:h.value})},[o("div",null,[P(o("input",{type:"text","onUpdate:modelValue":c[0]||(c[0]=s=>g.value=s),class:"bg-white rounded-lg placeholder:text-neutral-gray px-4 text-xs outline-none py-2 w-full mb-2 border-light-gray font-medium focus:ring-0 focus:border-light-gray",placeholder:"Cari Kategori"},null,512),[[N,g.value]])]),o("ul",le,[(i(!0),u(k,null,S(_(),s=>(i(),u("li",{key:s.id},[o("a",{href:"javascript:;",class:"flex gap-3 p-[5px] px-2 rounded-md hover:bg-neutral-light-gray text-sm text-dark transition-all","x-on:click":"dropdownOpen=false",onClick:O=>l(s)},v(s.name),9,ae)]))),128))])],4),re,se],2),e.error?(i(),u("small",ie,v(e.error),1)):m("",!0),e.help?(i(),u("small",ne,v(e.help),1)):m("",!0)],10,Q)],64))}}),ce={"x-data":"{popup: false}"},ue=o("a",{"x-on:click":"popup=true",id:"popup-filter"},null,-1),pe={class:"grid grid-cols-2 gap-x-3"},me={class:"col-span-2 mb-3"},fe={class:"flex items-center px-3 py-4 border border-light-gray rounded-lg col-span-2 mb-4"},ge=o("label",{for:"merchant",class:"w-full text-sm text-dark font-medium"},"Sort By Merchant",-1),he={class:"flex items-center px-3 py-4 border border-light-gray rounded-lg col-span-2 mb-4"},xe=o("label",{for:"incentives_amount",class:"w-full text-sm text-dark font-medium"},"Sort By Incentives Amount",-1),we=M({__name:"FilterMerchant",props:["categories","regions"],setup(f){const w=f,t=E({province:"",city:"",categories:[],sort:""}),p=y(!0),g=y([]),d=()=>{const a=t;var l={};a.categories.forEach((r,x)=>{l[`filter[categories][${x}]`]=r}),l["filter[province]"]=a.province,l["filter[city]"]=a.city,l["filter[sort]"]=a.sort,L(),R(l,!1),W("close-filter")};T(()=>t.province,(a,l)=>{p.value=!1,h()});const h=()=>{w.regions.filter(a=>{if(a.id==t.province){let l=t.city;g.value=a.cities,t.city="",g.value.map(r=>{r.id==l&&(t.city=l)}),setTimeout(()=>{p.value=!0},100)}})};return j(()=>{let a=z();t.city=a["filter[city]"]||"",t.sort=a["filter[sort]"]||"",t.province=a["filter[province]"]||"";const l=[];for(const r in a)if(r.startsWith("filter[categories][")&&r.match(/\[(\d+)\]/)){const _=parseInt(a[r],10);l.push(_)}t.categories=Array.from(new Set(l)),h()}),(a,l)=>(i(),u("section",ce,[ue,$(D,{title:"Filter Merchant"},{default:C(()=>[o("div",pe,[o("div",null,[f.regions?(i(),B(I,{key:0,placeholder:"Pilih Provinsi",label:"Provinsi",data:f.regions,id:"province",modelValue:n(t).province,"onUpdate:modelValue":l[0]||(l[0]=r=>n(t).province=r),selected:n(t).province,popup:!0},null,8,["data","modelValue","selected"])):m("",!0)]),o("div",null,[p.value?(i(),B(I,{key:0,placeholder:"Pilih Kabupaten",label:"Kabupaten/kotamadya",data:g.value,id:"city",modelValue:n(t).city,"onUpdate:modelValue":l[1]||(l[1]=r=>n(t).city=r),selected:n(t).city,popup:!0},null,8,["data","modelValue","selected"])):m("",!0)]),o("div",me,[f.categories?(i(),B(de,{key:0,label:"Kategori Merchant",category:f.categories,id:"categories",modelValue:n(t).categories,"onUpdate:modelValue":l[2]||(l[2]=r=>n(t).categories=r),selected:n(t).categories,popup:!0},null,8,["category","modelValue","selected"])):m("",!0)]),o("div",fe,[ge,P(o("input",{id:"merchant",value:"merchant",name:"sort",type:"radio",class:"w-5 h-5 text-white bg-white border-gray-600 300 focus:ring-green focus:ring-1 cursor-pointer transition-all checked:text-green","onUpdate:modelValue":l[3]||(l[3]=r=>n(t).sort=r)},null,512),[[A,n(t).sort]])]),o("div",he,[xe,P(o("input",{id:"incentives_amount",value:"incentives_amount",name:"sort",type:"radio",class:"w-5 h-5 text-white bg-white border-gray-600 300 focus:ring-green focus:ring-1 cursor-pointer transition-all checked:text-green","onUpdate:modelValue":l[4]||(l[4]=r=>n(t).sort=r)},null,512),[[A,n(t).sort]])]),$(J,{class:"justify-center","x-on:click":"popup=false",id:"close-filter"},{default:C(()=>[b(" Kembali ")]),_:1}),$(F,{class:"justify-center font-semibold","x-on:click":"popup=false",onClick:d},{default:C(()=>[b(" Terapkan ")]),_:1})])]),_:1})]))}});export{we as _};
