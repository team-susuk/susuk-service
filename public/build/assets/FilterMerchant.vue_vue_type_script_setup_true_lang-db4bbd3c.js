import{d as M,r as y,C as U,o as i,c as u,f as b,t as v,l as m,b as t,F as k,m as S,s as V,P as N,n as P,J as E,T as K,j as R,R as T,U as j,a as $,e as C,_ as z,k as B,u as n,v as A,S as D,V as F,W as L,h as W}from"./app-c378cb21.js";import{_ as I}from"./Single.vue_vue_type_script_setup_true_lang-953f42be.js";import{B as J}from"./OutlineBlue-b422741b.js";const q=["for"],H={key:0,class:"text-red"},Q=["data-value"],G=["id"],X={class:"px-3 items-center flex bg-neutral-light-gray text-xs h-[32px] rounded-full font-medium","x-on:click":"dropdownOpen=false"},Y=["onClick"],Z=t("i",{class:"isax icon-arrow-down-1 float-right mt-[-37px] me-4 text-[#B4B6B8] text-[13px]"},null,-1),ee={key:0,class:"mb-4"},te={class:"text-[11px] text-dark float-right"},oe=t("span",{"x-text":"input.length"},null,-1),ae={class:"flex-1 overflow-auto"},le=["onClick"],re=t("br",null,null,-1),se=t("br",null,null,-1),ie={key:1,class:"mt-[-7px] error-text mb-4 block text-[11px]"},ne={key:2,class:"block mt-[-7px] text-[10px] mb-4 text-[#A3A3A3]"},de=M({__name:"MultipleCategory",props:{label:{},help:{},error:{},id:{},category:{},selected:{},popup:{type:Boolean}},emits:["update:modelValue"],setup(f,{emit:_}){const o=_,p=f,g=y(""),d=y([]),h=y("auto"),l=y(!0),a=e=>{d.value.map(s=>s.id).includes(e.id)||(d.value.push({id:e.id,name:e.name}),o("update:modelValue",d.value.map(s=>s.id)))},r=e=>{d.value=d.value.filter(c=>c.id!==e),o("update:modelValue",d.value.map(c=>c.id))},x=()=>{const e=document.getElementById(`wrapper_category_${p.id}`);p.popup&&(e?(h.value=`${e.getBoundingClientRect().width}px`,window.innerHeight-e.getBoundingClientRect().bottom<250?l.value=!1:l.value=!0):h.value="auto")};U(()=>{if(p.selected){const e=[],c=JSON.parse(JSON.stringify(p.selected));p.category.forEach(s=>{c.includes(s.id)&&e.push({id:s.id,name:s.name})}),d.value=e}x(),window.addEventListener("resize",x)});const w=()=>{let e=g.value.toLowerCase();return p.category.filter(function(c){return c.name.toLowerCase().includes(e)})};return(e,c)=>(i(),u(k,null,[e.label?(i(),u("label",{key:0,for:e.id,class:"text-[12px] text-dark mb-1 block"},[b(v(e.label)+" ",1),e.$attrs.required?(i(),u("span",H,"*")):m("",!0)],8,q)):m("",!0),t("div",{class:V(["relative mb-2",{"has-error":e.error}]),"x-data":"{input: $el.getAttribute('data-value'),dropdownOpen : false}","data-value":e.$attrs.value||""},[t("div",{class:"border border-light-gray rounded-lg placeholder:text-neutral-gray px-4 text-sm min-h-[42px] flex gap-2 flex-wrap outline-none py-2 w-full mb-2 items-center",id:"wrapper_category_"+e.id},[(i(!0),u(k,null,S(d.value,s=>(i(),u("span",X,[b(v(s.name)+" ",1),t("i",{class:"isax-b icon-close-circle ms-3 cursor-pointer text-neutral-gray-3 text-lg",onClick:O=>r(s.id)},null,8,Y)]))),256)),t("div",{class:V(["mt-[3px] flex-1 h-full min-w-[100px] cursor-pointer whitespace-nowrap overflow-hidden font-medium",{"text-[#ddd]":d.value.length}]),"x-on:click":"dropdownOpen=true",onClick:x}," Pilih Kategori ",2)],8,G),Z,e.$attrs.maxlength?(i(),u("div",ee,[t("p",te,[oe,b("/"+v(e.$attrs.maxlength),1)])])):m("",!0),t("div",{class:V(["fixed w-full z-10",{"bottom-0":!l.value,fixed:e.popup,absolute:!e.popup}]),"x-transition:enter":"transition ease-out duration-50","x-transition:enter-start":"opacity-0 -translate-y-1","x-transition:enter-end":"opacity-100","x-show":"dropdownOpen","x-on:click.away":"dropdownOpen = false"},[t("div",{class:"bg-white border rounded-lg w-full max-h-60 p-2 flex flex-col",style:N({width:h.value})},[t("div",null,[P(t("input",{type:"text","onUpdate:modelValue":c[0]||(c[0]=s=>g.value=s),class:"bg-white rounded-lg placeholder:text-neutral-gray px-4 text-xs outline-none py-2 w-full mb-2 border-light-gray font-medium focus:ring-0 focus:border-light-gray",placeholder:"Cari Kategori"},null,512),[[E,g.value]])]),t("ul",ae,[(i(!0),u(k,null,S(w(),s=>(i(),u("li",{key:s.id},[t("a",{href:"javascript:;",class:"flex gap-3 p-[5px] px-2 rounded-md hover:bg-neutral-light-gray text-sm text-dark transition-all","x-on:click":"dropdownOpen=false",onClick:O=>a(s)},v(s.name),9,le)]))),128))])],4),re,se],2),e.error?(i(),u("small",ie,v(e.error),1)):m("",!0),e.help?(i(),u("small",ne,v(e.help),1)):m("",!0)],10,Q)],64))}}),ce={"x-data":"{popup: false}"},ue=t("a",{"x-on:click":"popup=true",id:"popup-filter"},null,-1),pe={class:"grid grid-cols-2 gap-x-3"},me={class:"col-span-2 md:col-span-1"},fe={class:"col-span-2 md:col-span-1"},ge={class:"col-span-2 mb-3"},he={class:"flex items-center px-3 py-4 border border-light-gray rounded-lg col-span-2 mb-4"},xe=t("label",{for:"merchant",class:"w-full text-sm text-dark font-medium"},"Sort By Merchant",-1),ve={class:"flex items-center px-3 py-4 border border-light-gray rounded-lg col-span-2 mb-4"},ye=t("label",{for:"incentives_amount",class:"w-full text-sm text-dark font-medium"},"Sort By Incentives Amount",-1),be=t("a",{id:"close-filter","x-on:click":"popup=false",hidden:""},null,-1),Ve=M({__name:"FilterMerchant",props:["categories","regions"],setup(f){const _=f,o=K({province:"",city:"",categories:[],sort:""}),p=y(!0),g=y([]),d=()=>{const l=o;var a={};l.categories.forEach((r,x)=>{a[`filter[categories][${x}]`]=r}),a["filter[province]"]=l.province,a["filter[city]"]=l.city,a["filter[sort]"]=l.sort,F(),L(a,!1),W("close-filter")};R(()=>o.province,(l,a)=>{p.value=!1,h()});const h=()=>{_.regions.filter(l=>{if(l.id==o.province){let a=o.city;g.value=l.cities,o.city="",g.value.map(r=>{r.id==a&&(o.city=a)}),setTimeout(()=>{p.value=!0},100)}})};return T(()=>{let l=j();o.city=l["filter[city]"]||"",o.sort=l["filter[sort]"]||"",o.province=l["filter[province]"]||"";const a=[];for(const r in l)if(r.startsWith("filter[categories][")&&r.match(/\[(\d+)\]/)){const w=parseInt(l[r],10);a.push(w)}o.categories=Array.from(new Set(a)),h()}),(l,a)=>(i(),u("section",ce,[ue,$(z,{title:"Filter Merchant"},{default:C(()=>[t("div",pe,[t("div",me,[f.regions?(i(),B(I,{key:0,placeholder:"Pilih Provinsi",label:"Provinsi",data:f.regions,id:"province",modelValue:n(o).province,"onUpdate:modelValue":a[0]||(a[0]=r=>n(o).province=r),selected:n(o).province,popup:!0},null,8,["data","modelValue","selected"])):m("",!0)]),t("div",fe,[p.value?(i(),B(I,{key:0,placeholder:"Pilih Kabupaten",label:"Kabupaten/kotamadya",data:g.value,id:"city",modelValue:n(o).city,"onUpdate:modelValue":a[1]||(a[1]=r=>n(o).city=r),selected:n(o).city,popup:!0},null,8,["data","modelValue","selected"])):m("",!0)]),t("div",ge,[f.categories?(i(),B(de,{key:0,label:"Kategori Merchant",category:f.categories,id:"categories",modelValue:n(o).categories,"onUpdate:modelValue":a[2]||(a[2]=r=>n(o).categories=r),selected:n(o).categories,popup:!0},null,8,["category","modelValue","selected"])):m("",!0)]),t("div",he,[xe,P(t("input",{id:"merchant",value:"merchant",name:"sort",type:"radio",class:"w-5 h-5 text-white bg-white border-gray-600 300 focus:ring-green focus:ring-1 cursor-pointer transition-all checked:text-green","onUpdate:modelValue":a[3]||(a[3]=r=>n(o).sort=r)},null,512),[[A,n(o).sort]])]),t("div",ve,[ye,P(t("input",{id:"incentives_amount",value:"incentives_amount",name:"sort",type:"radio",class:"w-5 h-5 text-white bg-white border-gray-600 300 focus:ring-green focus:ring-1 cursor-pointer transition-all checked:text-green","onUpdate:modelValue":a[4]||(a[4]=r=>n(o).sort=r)},null,512),[[A,n(o).sort]])]),$(J,{class:"justify-center",href:l.route("guide.merchants.index")},{default:C(()=>[b(" Reset ")]),_:1},8,["href"]),$(D,{class:"justify-center font-semibold","x-on:click":"popup=false",onClick:d},{default:C(()=>[b(" Terapkan ")]),_:1}),be])]),_:1})]))}});export{Ve as _};
